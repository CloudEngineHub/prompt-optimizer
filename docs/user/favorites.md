# 收藏管理指南

## 📚 收藏管理功能概览

收藏管理是提示词优化器的核心功能，帮助您保存、组织和管理优化后的提示词。经过重构后，收藏管理提供了更强大的分类和标签系统。

## 🏷️ 三层分类体系

### 1. 功能模式 (Function Mode) - 一级分类
- **基础模式 (Basic)**: 标准的提示词优化
- **上下文模式 (Context)**: 需要上下文信息的优化
- **图像模式 (Image)**: 图像相关的提示词优化

### 2. 优化模式 (Optimization Mode) - 二级分类 (基础模式)
- **系统优化 (System)**: 系统自动优化
- **用户优化 (User)**: 用户自定义优化

### 3. 图像子模式 (Image Sub Mode) - 二级分类 (图像模式)
- **文本生成图像 (Text to Image)**: 从文本生成图像
- **图像生成图像 (Image to Image)**: 基于图像生成新图像

### 4. 分类 (Category) - 主题分类
- 学习研究
- 日常助手
- 工作效率
- 创意写作
- 编程开发
- 自定义分类

## 🎯 使用指南

### 创建收藏

#### 方法1: 从优化历史创建
1. 完成提示词优化后，点击 **收藏** 按钮
2. 系统自动推断功能模式和相关设置
3. 填写标题和标签
4. 选择分类
5. 点击 **保存**

#### 方法2: 手动创建收藏
1. 点击 **收藏管理** 按钮
2. 点击 **创建收藏** 按钮
3. 选择功能模式：
   - 基础模式：选择优化模式
   - 图像模式：选择图像子模式
4. 填写提示词内容
5. 添加标签（支持自动完成）
6. 选择分类
7. 点击 **保存**

### 标签管理

#### 标签自动完成
- 在标签输入框中输入文字
- 系统会显示匹配的标签建议
- 使用频率高的标签会优先显示
- 按 Enter 键或点击建议添加标签

#### 标签管理器
1. 在收藏管理器中点击 **标签管理**
2. **查看标签**：列表显示所有标签和使用次数
3. **重命名标签**：点击重命名按钮，批量更新所有相关收藏
4. **合并标签**：将多个标签合并为一个，自动去重
5. **删除标签**：从所有收藏中移除指定标签
6. **搜索标签**：使用搜索框快速找到目标标签

### 分类管理

#### 分类管理器
1. 在收藏管理器中点击 **分类管理**
2. **创建分类**：
   - 点击 **添加分类**
   - 输入分类名称
   - 选择颜色标识
   - 添加描述（可选）
3. **编辑分类**：修改分类名称、颜色或描述
4. **排序分类**：使用上移/下移按钮调整顺序
5. **删除分类**：
   - 系统会检查是否有收藏使用该分类
   - 有收藏的分类无法删除，防止数据丢失

### 搜索和过滤

#### 搜索功能
- **关键词搜索**：在搜索框输入关键词，搜索标题和内容
- **实时搜索**：输入时即时显示搜索结果
- **搜索高亮**：匹配的文字会被高亮显示

#### 过滤功能
- **按分类过滤**：下拉选择特定分类
- **按标签过滤**：选择标签进行过滤
- **组合过滤**：可以同时使用分类和标签过滤
- **清除过滤**：点击清除按钮重置所有过滤条件

### 导入导出

#### 导出收藏
1. 在收藏管理器中点击 **更多菜单**
2. 选择 **导出** 选项
3. 系统会下载包含所有收藏、标签和分类的JSON文件
4. 导出数据包含：
   - 收藏内容
   - 标签信息
   - 分类设置
   - 使用统计

#### 导入收藏
1. 在收藏管理器中点击 **更多菜单**
2. 选择 **导入** 选项
3. 选择要导入的JSON文件
4. 系统会：
   - 自动处理ID冲突
   - 导入标签和分类
   - 迁移旧数据格式
   - 显示导入结果统计

## 🔧 高级功能

### 独立标签库
- 标签可以独立于收藏存在
- 支持预创建标签，为后续收藏做准备
- 导入时保留零使用次数的标签

### 数据迁移
- 系统自动检测旧版本数据
- 自动添加缺失的功能模式字段
- 保持向后兼容性

### 性能优化
- 支持大量收藏（1000+）的快速搜索
- 智能缓存统计信息
- 批量操作原子性保证

## 📱 快捷操作

### 收藏管理器快捷键
- **Ctrl/Cmd + F**: 聚焦搜索框
- **Ctrl/Cmd + N**: 创建新收藏
- **Escape**: 关闭对话框

### 标签输入快捷键
- **Enter**: 添加当前输入的标签
- **Tab**: 移动到下一个输入框
- **↑/↓**: 在自动完成建议中导航

## 🎨 界面特性

### 响应式设计
- 适配不同屏幕尺寸
- 移动端友好的触控操作
- 自适应布局

### 主题支持
- 支持亮色/暗色主题
- 自动跟随系统主题设置
- 自定义颜色配置

### 无障碍访问
- 完整的键盘导航支持
- 屏幕阅读器兼容
- 高对比度模式

## ⚠️ 注意事项

### 数据备份
- 定期导出收藏数据作为备份
- 重要建议创建多个副本
- 使用云存储同步备份文件

### 性能建议
- 收藏数量超过500个时，建议使用搜索和过滤功能
- 定期清理不需要的标签和分类
- 避免创建过多的重复标签

### 兼容性
- 支持从旧版本自动升级
- 导入的旧格式数据会自动转换
- 跨平台数据完全兼容

## 🆘 常见问题

**Q: 为什么我的标签无法删除？**
A: 如果标签正在被收藏使用，需要先从所有收藏中移除该标签，或者使用标签管理器的删除功能。

**Q: 导入数据时会发生什么？**
A: 系统会自动处理ID冲突，保留现有数据，导入新数据，并自动合并标签和分类。

**Q: 如何批量编辑多个收藏？**
A: 目前支持批量标签操作（重命名、合并、删除），通过标签管理器可以实现。

**Q: 收藏数量有限制吗？**
A: 理论上没有限制，但建议保持在1000个以内以获得最佳性能。

## 📞 技术支持

如果在使用过程中遇到问题，请：
1. 查看本指南的相关章节
2. 检查是否有数据备份
3. 重启应用尝试解决
4. 联系技术支持团队