# 数据管理（导入/导出/隐私）

本指南介绍 Prompt Optimizer 的数据存储、备份和隐私保护功能。

## 💾 数据存储

### 存储位置
- **Web版本** - 数据存储在浏览器的localStorage中
- **桌面版本** - 数据存储在本地文件系统中
- **Chrome插件** - 数据存储在扩展程序存储区

### 存储内容
- **配置信息** - 模型设置、用户偏好等
- **历史记录** - 所有优化历史和结果
- **自定义模板** - 用户创建的优化模板
- **缓存数据** - 临时数据和性能优化缓存

### 数据安全
- **本地存储** - 所有数据仅存储在用户设备上
- **不上传服务器** - 数据不会发送到任何远程服务器
- **加密保护** - 敏感数据使用浏览器加密存储
- **API密钥保护** - API密钥单独加密存储

## 📤 数据导出

### 导出功能
1. **完整导出**
   - 导出所有用户数据
   - 包含配置、历史、模板等
   - 生成JSON格式的备份文件

2. **选择性导出**
   - 只导出特定类型的数据
   - 可选择时间范围
   - 支持多种格式

### 导出操作
1. **访问导出功能**
   - 进入设置页面
   - 点击"数据管理"选项卡
   - 找到"导出数据"部分

2. **选择导出内容**
   - ✅ 优化历史记录
   - ✅ 自定义模板
   - ✅ 模型配置（不含API密钥）
   - ✅ 用户偏好设置

3. **下载备份文件**
   - 点击"导出"按钮
   - 等待数据打包完成
   - 下载生成的备份文件

### 上下文集合导出（与上下文编辑器联动）
- 在数据管理中可直接导出“上下文集合（context-bundle）”至文件或剪贴板
- 导出结构包含：`type/context-bundle`、`version`、`currentId`、`contexts[]`
- 单个上下文在“上下文编辑器 → 导出（标准格式）”中也可导出（含 messages/metadata.variables/tools）

## 📥 数据导入

### 导入功能
1. **从备份恢复**
   - 使用之前导出的备份文件
   - 完整恢复所有数据
   - 支持增量导入

2. **跨设备同步**
   - 在不同设备间同步数据
   - 保持配置和历史一致
   - 支持选择性同步

### 导入操作
1. **准备备份文件**
   - 确保备份文件格式正确
   - 检查文件完整性
   - 备份当前数据（可选）

2. **执行导入**
   - 点击"导入数据"按钮
   - 选择备份文件
   - 选择导入选项

3. **导入选项**
   - **替换模式** - 完全替换现有数据
   - **合并模式** - 与现有数据合并
   - **选择性导入** - 只导入特定类型数据

### 上下文集合导入（replace 模式）
- 支持从文件/剪贴板导入“上下文集合”，默认 replace 模式
- 导入统计会显示：`imported/skipped/predefinedVariablesRemoved`
- 预定义变量（`currentPrompt/originalPrompt/lastOptimizedPrompt/iterateInput/userQuestion/conversationContext`）将被剔除，不会保存为覆盖项

## 🧹 数据清理

### 清理选项
1. **清除历史记录**
   - 删除所有优化历史
   - 可选择保留收藏的记录
   - 释放存储空间

2. **重置用户设置**
   - 恢复默认配置
   - 清除个性化设置
   - 保留API密钥（可选）

3. **删除自定义模板**
   - 清除用户创建的模板
   - 恢复内置模板
   - 支持选择性删除

### 清理操作
1. **访问清理功能**
   - 进入设置页面的数据管理部分
   - 找到"数据清理"选项

2. **选择清理范围**
   - 勾选需要清理的数据类型
   - 确认清理范围和影响
   - 建议先导出备份

3. **执行清理**
   - 点击"开始清理"
   - 确认清理操作
   - 等待清理完成

## 🔐 隐私保护

### 数据处理原则
- **最小化收集** - 只收集必要的功能数据
- **用户控制** - 用户完全控制自己的数据
- **透明度** - 明确说明数据的使用方式
- **安全传输** - API调用使用HTTPS加密

### API调用隐私
- **直连模式** - 请求直接发送到AI服务商
- **不经过中间服务器** - 避免数据泄露风险
- **临时处理** - 不永久存储API响应内容
- **用户掌控** - 完全由用户控制API密钥

## 📋 数据管理最佳实践

### 定期备份
1. **备份频率**
   - 重要项目立即备份
   - 日常使用每周备份
   - 大量数据每日备份

2. **备份策略**
   - 保留多个备份版本
   - 使用云存储或外部设备
   - 定期验证备份完整性

### 存储优化
1. **定期清理**
   - 删除不需要的历史记录
   - 清理过期的临时数据
   - 整理和归档重要数据

2. **性能维护**
   - 避免存储过多数据影响性能
   - 定期检查存储空间使用
   - 优化数据结构

---

**相关链接**：
- [故障排除](../help/troubleshooting.md) - 数据相关问题解决
